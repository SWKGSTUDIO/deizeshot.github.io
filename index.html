<!DOCTYPE html>
<html lang="en-us">

<head>
  <title>SWEETYKITTYGAMES</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <link rel="shortcut icon" href="TemplateData/favicon.ico">
  <link rel="stylesheet" href="TemplateData/style.css">
  <audio id="sound1" src="TemplateData/1.mp3"></audio>
  <audio id="sound2" src="TemplateData/2.mp3"></audio>
  <audio id="sound3" src="TemplateData/3.mp3"></audio>
  <script src="https://kit.fontawesome.com/85707f8d4b.js" crossorigin="anonymous"></script>

  <style>
    .centered-logo {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      transition: none;
    }
  
    .top-left-logo {
      top: 0;
      left: 0;
    }
  </style>
  
  <script>
    $(document).ready(function() {
      $("#unity-logo").mousedown(function() {
        $(this).addClass("bounce-animation");

        setTimeout(function() {
          $("#unity-logo").removeClass("bounce-animation");
        }, 1000);
      });

      function shakeButton() {
        playButton.classList.add("shake");
        setTimeout(function() {
          playButton.classList.remove("shake");
        }, 1000);
      }

      function startShakeAnimation() {
        function getRandomDelay() {
          return Math.random() * 3000 + 4000;
        }

        function animateButton() {
          shakeButton();
          setTimeout(animateButton, getRandomDelay());
        }

        shakeButton();
        setTimeout(animateButton, getRandomDelay());
      }

      startShakeAnimation();
    });
  </script>

  <script>
    $(document).ready(function() {
      var messages = ["SWEETY", "KITTY", "GAMES"];
      var sounds = ["sound1", "sound2", "sound3"];
      var messageIndex = 0;

      function showMessage() {
        $("#message-overlay").text(messages[messageIndex]);
        $("#message-overlay").addClass("show-message");
        setTimeout(function() {
          $("#message-overlay").removeClass("show-message");
        }, 2000);
        messageIndex = (messageIndex + 1) % messages.length;
      }

      function playRandomSound() {
        var randomSound = sounds[Math.floor(Math.random() * sounds.length)];
        var audio = document.getElementById(randomSound);
        audio.play();
      }

      $("#unity-logo").click(function() {
        showMessage();
        playRandomSound();
      });
    });
  </script>
  
</head>

<body class="dark">
    <div id="unity-container" class="unity-desktop">
      <canvas id="unity-canvas"></canvas>
      <div id="background-layer"></div>
      <div id="tile-layer"></div>
    </div>
  
    <div id="top-panel">
      <div class="round-button">
          <i class="fa-solid fa-ghost fa-bounce"></i>
      </div>
      SWEETY KITTY GAMES
    </div>
  
    <div id="loading-cover">
      <div id="unity-loading-bar">
        <div id="unity-logo" onclick="playRandomSound()">
          <div id="message-overlay"></div>
          <div id="layer1" class="logo-layer"></div>
          <div id="layer2" class="logo-layer"></div>
        </div>
        <div id="list-widget" style="display:none;"></div>
      </div>
    </div>
  
    <script>
      $(document).ready(function() {
        var messages = ["SWEETY", "KITTY", "GAMES"];
        var sounds = ["sound1", "sound2", "sound3"];
        var messageIndex = 0;
  
        function showMessage() {
          $("#message-overlay").text(messages[messageIndex]);
          $("#message-overlay").addClass("show-message");
          setTimeout(function() {
            $("#message-overlay").removeClass("show-message");
          }, 2000);
          messageIndex = (messageIndex + 1) % messages.length;
        }
  
        function playRandomSound() {
          var randomSound = sounds[Math.floor(Math.random() * sounds.length)];
          var audio = document.getElementById(randomSound);
          audio.play();
        }
  
        $("#unity-logo").click(function() {
          showMessage();
          playRandomSound();
        });
      });
  
      const apiKey = 'key9kpLHqsdRFXvS2';
      const baseId = 'appaePimTt1Ji6hSr';
      const tableName = 'tblivWUpxtGbTszm3';
  
      fetch(`https://api.airtable.com/v0/${baseId}/${tableName}?api_key=${apiKey}`)
        .then(response => response.json())
        .then(data => {
          const listWidget = document.getElementById('list-widget');
          const unityLogo = document.getElementById('unity-logo');
          const ul = document.createElement('ul');
          ul.classList.add('button-list', 'horizontal');
  
          data.records.forEach(record => {
            const fields = record.fields;
            const name = fields['Name'];
            const imageUrl = fields['Image'];
            const url = fields['URL'];
  
            const button = document.createElement('button');
            const img = document.createElement('img');
            img.src = imageUrl;
            img.alt = name;
            button.appendChild(img);
  
            const span = document.createElement('span');
            span.innerText = "";
            span.classList.add('image-text');
            img.parentNode.insertBefore(span, img.nextSibling);
  
            button.addEventListener('click', () => {
              window.location.href = url;
            });
  
            const li = document.createElement('li');
            li.appendChild(button);
            ul.appendChild(li);
          });
          
          listWidget.appendChild(ul);
          
          setTimeout(function() {
            document.getElementById('list-widget').style.display = 'block';
            document.getElementById('unity-logo').style.display = 'none';
          }, 3000);
        })
        .catch(error => {
          console.error(error);
        });
    </script>

    
  <script>
    const buildUrl = "Build";
    const container = document.querySelector("#unity-container");
    const canvas = document.querySelector("#unity-canvas");
    const loadingCover = document.querySelector("#loading-cover");
    const playButtonContainer = document.querySelector("#play-button-container");
    const playButton = document.querySelector("#play-button");
    const playButtonProgress = document.querySelector("#play-button-progress");
    const playButtonFill = document.querySelector("#play-button-fill");
    const spinner = document.querySelector('.spinner');
    const backgroundLayer = document.querySelector("#background-layer");
    const tileLayer = document.querySelector("#tile-layer");

    function showPlayButton() {
      playButtonContainer.style.display = "block";
      spinner.style.display = "none";
    }

    function hidePlayButton() {
      playButtonContainer.style.display = "none";
      spinner.style.display = "block";
    }

    function startGame() {
      hidePlayButton();
      myGameInstance.Module.canvas.style.display = "block";
      myGameInstance.Module.canvas.focus();
      loadingCover.style.display = "none";
      backgroundLayer.style.display = "none";
      tileLayer.style.display = "none";
      playButtonProgress.style.width = "100%";
      playButtonFill.style.backgroundColor = "#fff";
    }

    loadingCover.style.display = "";

    const script = document.createElement("script");
    script.src = loaderUrl;
    
    document.body.appendChild(script);
</script>
</body>
</html>
